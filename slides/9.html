<link rel="stylesheet" href="styles/page-wave.css">
<link rel="stylesheet" href="styles/playground.css">

<h1>正規表現の後読みと、名前付きキャプチャ</h1>

<p>
  文字列の中で、指定した文字の直後を表す<br>
  キャプチャに名前を付けて参照する
</p>

<template class="playground" data-tab="script">
  <script>
    const text1 = 'CAMPFIRE MEETUP'
    const re1 = /(?<=M)/g
    console.log(text1.replace(re1, '@'))

    const text2 = '2021-04-07'
    const re2 = /(?<year>\d+)-(?<month>\d+)-(?<day>\d+)/
    console.log(text2.match(re2).groups)
  </script>
</template>

<script src="scripts/page.js"></script>
<script src="scripts/playground.js"></script>

<div class="slide-note">
  NG: Safari (後読みのみ)

  正規表現の後読みです。
  javascriptには長らくありませんでしたが、ようやく使えるようになりました。

  後読み、というのは特定の文字の直後のポイントを指すものです。
  この例だとCAMPFIRE MEETUPとあって、Mの直後だから、つまりCAMPのPの手前と、MEETUPのEの手前、それぞれの隙間を指すことになります。
  なのでアットマークがそれぞれ挟まってますね。

  何かの文字の後の何か、という探し方は本当によくあるので、まさに待望のという感じです。Safariでは使えません。

  そして名前付きキャプチャは、カッコ書きでキャプチャした文字列を、配列の番号ではなく名前で参照するものです。
  これもjavascriptで使えるようになりました。
  こんな感じで年月日を、それぞれ名前で取れます。

  これで可読性や保守性が少しだけ上がる、かもしれません。
  まず入り組んだ正規表現自体を避けるべきなんですけども。
</div>
